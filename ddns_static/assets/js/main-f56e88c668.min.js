!function(e){var t=function(e,t,o,n,i,r,a){$.ajax({type:e,url:t,data:o,dataType:"json",cache:!1,async:!(void 0!==a&&!a),contentType:r&&0!==r.length?r:"application/x-www-form-urlencoded; charset=UTF-8",xhrFields:{withCredentials:!0},success:n,error:i})},o=function(e,o,n){t("GET","/domain/"+e+"/recodes",void 0,o,n)},n=function(e,o,n,i){t("POST","/domain/"+e+"/recodes",o,n,i)},i=function(e,o,n){t("DELETE","/recode/"+e,void 0,o,n)},r=function(e,o,n,i){t("PATCH","/recode/"+e,o,n,i)},a=function(e,o,n){t("POST","/domains",{domain:e},o,n)},d=function(e,o,n){t("DELETE","/domain/"+e,void 0,o,n)},l=function(e,o,n,i){t("PATCH","/domain/"+e,{domain:o},n,i)},s=function(e,o,n){t("POST","/downloads",{url:e},o,n)},c=function(e,o){t("GET","/downloads",void 0,e,o)},u=function(e,o,n){t("POST","/download/del",e,o,n)};e.ddns_get_recodes=o,e.ddns_new_domain=a,e.ddns_delete_domain=d,e.ddns_update_domain=l,e.ddns_new_recode=n,e.ddns_delete_recode=i,e.ddns_update_recode=r,e.d_download_url=s,e.d_get_downloads=c,e.d_delete_download=u}("object"==typeof exports?exports:window,jQuery),function(e){function t(){return $(window).height()-$("h1").outerHeight(!0)}function o(e,t){return""===e.id?{classes:"new-row"}:""}function n(e){function n(e,t,o){return'<input class="dynamic" type="checkbox"'+(e===!0?'checked="checked"':"")+'"/>'}function i(){l.bootstrapTable({height:t(),columns:[[{title:"ID",field:"id",align:"center",valign:"middle",visible:!1},{field:"host",title:"Host Recode",editable:!0,align:"center"},{field:"value",title:"Recode Value",editable:!0,align:"center"},{field:"type",title:"Recode Type",align:"center",editable:{type:"select",value:1,source:[{value:1,text:"A"},{value:2,text:"AAAA"},{value:3,text:"CNAME"}]}},{field:"ttl",title:"TTL",editable:!0,align:"center"},{field:"dynamic",title:"Dynamic",align:"center",formatter:n,events:{"click .dynamic":function(e,t,o,n){o.dynamic=!t}}},{field:"key",title:"Update Key",align:"center",visible:!1},{field:"operate",title:"Operate",align:"center",events:u,formatter:d}]],responseHandler:a,url:"/domain/"+e+"/recodes",rowStyle:o}),s.click(function(){var e=r();l.bootstrapTable("remove",{field:"id",values:e}),s.prop("disabled",!0)}),c.click(function(){var e=Number(new Date);l.bootstrapTable("insertRow",{index:0,row:{id:"",host:"@",key:"",value:"",type:1,ttl:600,dynamic:!0,randomId:e}})}),$(window).resize(function(){l.bootstrapTable("resetView",{height:t()})})}function r(){return $.map(l.bootstrapTable("getSelections"),function(e){return e.id})}function a(e){if(e){if("ok"==e.code)return{total:e.recodes.length,rows:e.recodes};var t=e.code;e.msg&&e.code.length&&(t+="   "+e.msg),alert(t)}return{total:0,rows:[]}}function d(e,t,o){return['<a class="save" href="javascript:void(0)" title="Save">','<i class="\tglyphicon glyphicon-saved"></i>',"</a>",'<a class="remove" href="javascript:void(0)" title="Remove">','<i class="glyphicon glyphicon-remove"></i>',"</a>"].join("")}var l=$("#tb_recodes"),s=$("#remove"),c=$("#add"),u={"click .save":function(t,o,n,i){n.id&&n.id>0?ddns_update_recode(n.id,{host:n.host,type:n.type,value:n.value,ttl:n.ttl},function(e){if("ok"===e.code)alert("ok");else{var t=e.code;e.msg&&e.msg.length&&(t+="   "+e.msg),alert(t)}}):ddns_new_recode(e,{host:n.host,type:n.type,value:n.value,ttl:n.ttl},function(e){if("ok"==e.code)l.bootstrapTable("updateRow",{index:i,row:{id:e.id,key:e.key,dynamic:e.dynamic}});else{var t=e.code;e.msg&&e.msg.length&&(t+="   "+e.msg),alert(t)}})},"click .remove":function(e,t,o,n){void 0===o.id||""===o.id?o.randomId&&l.bootstrapTable("remove",{field:"randomId",values:[o.randomId]}):ddns_delete_recode(o.id,function(e){if("ok"===e.code)l.bootstrapTable("remove",{field:"id",values:[o.id]});else{var t=e.code;e.msg&&e.msg.length&&(t+="   "+e.msg),alert(t)}})}};i()}function i(){function e(){return['<a class="save" href="javascript:void(0)" title="Like">','<i class="\tglyphicon glyphicon-saved"></i>',"</a>",'<a class="remove" href="javascript:void(0)" title="Remove">','<i class="glyphicon glyphicon-remove"></i>',"</a>"].join("")}function n(e){if(e){if("ok"==e.code)return{total:e.domains.length,rows:e.domains};var t=e.code;e.msg&&e.code.length&&(t+="   "+e.msg),alert(t)}return{total:0,rows:[]}}function i(e,t,o){return'<a href="/domain/'+e+'/recodes">'+e+"</a>"}var r=$("#tb_domains"),a=$("#remove"),d=$("#add"),l={"click .save":function(e,t,o,n){o.id&&o.id>0?ddns_update_domain(o.id,o.domain,function(e){if("ok"==e.code)r.bootstrapTable("updateRow",{index:n,row:{id:e.id}});else{var t=e.code;e.msg&&e.msg.length&&(t+="   "+e.msg),alert(t)}}):ddns_new_domain(o.domain,function(e){if("ok"==e.code)r.bootstrapTable("updateRow",{index:n,row:{id:e.id}});else{var t=e.code;e.msg&&e.msg.length&&(t+="   "+e.msg),alert(t)}},function(e,t,o){})},"click .remove":function(e,t,o,n){void 0===o.id||""===o.id?o.randomId&&r.bootstrapTable("remove",{field:"randomId",values:[o.randomId]}):ddns_delete_domain(o.id,function(e){if("ok"===e.code)r.bootstrapTable("remove",{field:"id",values:[o.id]});else{var t=e.code;e.msg&&e.msg.length&&(t+="   "+e.msg),alert(t)}})}};!function(){r.bootstrapTable({height:t(),columns:[[{title:"ID",field:"id",align:"center",valign:"middle",formatter:i},{field:"domain",title:"Domain",editable:!0,align:"center"},{field:"operate",title:"Operate",align:"center",events:l,formatter:e}]],responseHandler:n,rowStyle:o}),a.click(function(){var e=getIdSelections();r.bootstrapTable("remove",{field:"id",values:e}),a.prop("disabled",!0)}),d.click(function(){var e=Number(new Date);r.bootstrapTable("insertRow",{index:0,row:{id:"",name:"test.site",key:"",value:"",ttl:600,dynamic:!0,randomId:e}})}),$(window).resize(function(){r.bootstrapTable("resetView",{height:t()})})}()}function r(){var e=$("#dtable"),n=$("#dbtn"),i=$("#d-input"),r={"click .remove":function(t,o,n,i){d_delete_download({id:n.id,dest:n.dest},function(t){if("ok"===t.code)e.bootstrapTable("refresh");else{var o=t.code;t.msg&&t.msg.length&&(o+="   "+t.msg),alert(o)}})}};!function(){function a(e){if(e){if("ok"==e.code)return{total:e.tasks.length,rows:e.tasks};var t=e.code;e.msg&&e.code.length&&(t+="   "+e.msg),alert(t)}return{total:0,rows:[]}}function d(e,t,o){return['<a class="download" href="'+t.dest+'" target=_blank title="Download">','<i class="glyphicon glyphicon-download-alt"></i>',"</a>",'<a class="remove" href="javascript:void(0)" title="Remove">','<i class="glyphicon glyphicon-remove"></i>',"</a>"].join("")}function l(e,t,o){return t.src&&t.src.length?'<span title="'+t.src+'">'+e+"</span>":e}function s(e,t,o){if(t.size&&t.size>0)return void 0!==t.transferred?precision(t.transferred/(1*t.size)*100)+"%":"0%"}function c(e,t,o){return e<1024?precision(e)+"Byte/s":e<1048576?precision(e/1024)+"Kb/s":e<1073741824?precision(e/1048576)+"Mb/s":precision(e/1073741824)+"Gb/s"}function u(e,t,o){return e<1024?precision(e)+"Byte":e<1048576?precision(e/1024)+"K":e<1073741824?precision(e/1048576)+"M":precision(e/1073741824)+"G"}e.bootstrapTable({height:t(),columns:[[{title:"ID",field:"id",align:"center",valign:"middle",visible:!1},{field:"name",title:"Name",align:"left",formatter:l},{field:"size",title:"Size",align:"right",formatter:u},{field:"progress",title:"Progress",formatter:s,align:"center"},{field:"bytesPerSecond",title:"Speed",formatter:c,align:"center"},{field:"operate",title:"Operate",align:"center",events:r,formatter:d}]],responseHandler:a,rowStyle:o}),n.click(function(){if(0===i.val().length)return void alert("please enter url...");var t=i.val();d_download_url(t,function(t){if("ok"===t.code)e.bootstrapTable("refresh"),i.val("");else{var o=t.code;t.msg&&t.msg.length&&(o+="   "+t.msg),alert(o)}})}),$(window).resize(function(){e.bootstrapTable("resetView",{height:t()})})}();var a=function(){document.getElementById("dtable")&&(d_get_downloads(function(t){var o=e.bootstrapTable("getData"),n=function(t){for(var n=0;n<o.length;++n)if(o[n].dest===t.dest){o[n].transferred===t.transferred&&o[n].bytesPerSecond===t.bytesPerSecond||(o[n].transferred=t.transferred,o[n].bytesPerSecond=t.bytesPerSecond,e.bootstrapTable("updateRow",n,o[n]));break}if(n===o.length)return e.bootstrapTable("refresh"),!1};"ok"===t.code&&t.tasks&&t.tasks.length&&$.each(t.tasks,function(e,t,o){if(n(t)===!1)return!1})}),setTimeout(a,500))};a()}!function(){$(".dropdown-menu .logout").click(function(e){e.preventDefault(),$.ajax({type:"POST",url:"/logout",cache:!1,xhrFields:{withCredentials:!0},success:function(e){if("ok"===e.code||"InvalidSession"===e.code){var t=window.location.href;"/login"!==t&&(t="/login?to="+encodeURIComponent(t)),window.location.href=t}else alert("logout failed,"+e.code)}})})}(),e.on_init_recode_lists=n,e.on_init_domians_view=i,e.on_init_downloads_view=r}("object"==typeof exports?exports:window,jQuery),function(e){var t=Meny.create({menuElement:document.querySelector(".meny"),contentsElement:document.querySelector(".contents"),position:Meny.getQuery().p||"left",height:200,width:260,threshold:30,mouse:!0,touch:!0,overlap:0});e.meny=t,$(".menu-item").click(function(e){var t=$(this).attr("href");return!!t.match(/^http/gi)||($.ajax({type:"GET",url:t,cache:!1,dataType:"html",xhrFields:{withCredentials:!0},headers:{"DDNS-View":"true"},success:function(e,o,n){if(401==n.status)return void(window.location.href="/login");if(200==n.status){$("#view-container").html(e);var i={title:"",url:t};return void history.pushState(i,"",t)}window.location.href=t},error:function(){window.location.href=t}}),void e.preventDefault())})}("object"==typeof exports?exports:window),function(e){var t=function(e,t){var o=document.getElementsByTagName("head")[0],n=document.createElement("script");n.src=e;var i=!1;n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i=!0,t&&t(),n.onload=n.onreadystatechange=null)},o.appendChild(n)},o=function(e,o){if(o=o||function(){},!e.length)return o();var n=0,i=function(){t(e[n],function(t){t?(o(t),o=function(){}):(n+=1,n>=e.length?o(null):i())})};i()},n=function(e){return 100*e.toFixed(2)/100};e.load_series=o,e.precision=n}("object"==typeof exports?exports:window,jQuery);