jQuery(document).ready(function(){$.backstretch([(AssetsHost?AssetsHost:"")+"/assets/img/backgrounds/2.jpg",(AssetsHost?AssetsHost:"")+"/assets/img/backgrounds/3.jpg",(AssetsHost?AssetsHost:"")+"/assets/img/backgrounds/1.jpg"],{duration:3e3,fade:750}),$('.login-form input[type="text"], .login-form input[type="password"], .login-form textarea').on("focus",function(){$(this).removeClass("input-error")}),$(".login-form").on("submit",function(s){s.preventDefault();var e=$('input[type="text"]');if(""===e.val())return void e.addClass("input-error");e.removeClass("input-error");var r=$('input[type="password"]');if(""===r.val())return void r.addClass("input-error");r.removeClass("input-error");var t=function(){var s=new RegExp("(\\?|&)to=([^&]*)(&|$)"),e=window.location.search.match(s);return null!==e?unescape(e[2]):null};$.ajax({type:"POST",url:"/login",data:{username:e.val(),password:r.val()},contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(s){if("ok"===s.code){var o=t();null===o&&(o="/"),window.location.href=o}else if("UserNameError"===s.code)e.addClass("input-error");else if("PasswordError"===s.code)r.addClass("input-error");else{var a=s.code;s.msg&&(a+=" "+s.msg),alert(a)}}})})});